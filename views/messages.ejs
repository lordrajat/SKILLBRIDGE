<!DOCTYPE html>
<html lang="en">

<head>
  <title>User Profile</title>

  <meta charset="UTF-8" >
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <meta name="viewport" content="width=device-width, initial-scale=1.0" >

  <link rel="stylesheet" href="/vendor/normalize-4.1.1.css" />
  <link rel="stylesheet" href="/vendor/border-box.css" />
  <!--  Main-layout-override.css -->
  <link rel="stylesheet" href="/styles/main-layout-override.css" />
  <!-- admin.css -->
  <link rel="stylesheet" href="/styles/admin.css">
  <!-- index.css -->
  <link rel="stylesheet" href="/styles/index.css">
  <!-- navigation.css -->
  <link rel="stylesheet" href="/styles/navigation.css">
  <!-- footer.css -->
  <link rel="stylesheet" href="/styles/footer.css">
  <!-- user-profile.css -->
  <link rel="stylesheet" href="/styles/user-profile.css">

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;600&display=swap" rel="stylesheet">

  <script src="/vendor/jquery-3.0.0.js"></script>
  <script defer src="/scripts/app.js"></script>
</head>

<body>

  <!-- Navigation partial view -->
  <%- include('partials/_navigation') %>

 <!-- User Favourites Section -->

     <!--user messages section-->
     <div class="messages-container">
      <h3 class="messages-title">Your Messages</h3>


      <% for (let message of messages) { %>
     <div class="message-reply-box">
      <h2 class="test-user"> User: <%= message.user_id %></h2>
      <p><%=  message.messages %></p>
     <button id="reply-button" class="button">Reply</button>


     </div>
     <% } %>
     </div>


       <!-- Reply to message modal -->

       <form class="message-container" method="POST" action="/messages/">
   <div id="reply-modal" class="modal-container">
    <div class="modal-content">
      <p class="reply-modal-message">Reply to message</p>
      <textarea name="message" id="reply-text-area" cols="30" rows="5"></textarea>
      <button class="button" type="submit">Send</button>
      <button id="reply-cancel" class="button">Cancel</button>
    </form>
    </div>
   </div>







  <!-- Footer partial view -->
  <%- include('partials/_footer') %>




  <script>
    let replyModal = document.getElementById("reply-modal")
    let replyButton = document.getElementById("reply-button");
    let replyCancel = document.getElementById("reply-cancel");
    let replyTextArea = document.getElementById("reply-text-area");

    //Open reply modal when user click reply button
    replyButton.onclick = function() {
      replyModal.style.display = "block";
    };

    //Close reply modal when user clicks the cancel button
    replyCancel.onclick = function() {
      replyTextArea.value = "";
      replyModal.style.display = "none";
    };

    //Close reply modal if user clicks anywhere outside the modal
    window.onclick = function(event) {
      if (event.target == replyModal) {
        replyTextArea.value = "";
        replyModal.style.display = "none";
      };
    }

  </script>


</body>

</html>
